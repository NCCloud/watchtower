apiVersion: cloud.spaceship.com/v1alpha2
kind: Watcher
metadata:
  name: simple-watcher
  namespace: default
spec:
  source:
    apiVersion: "v1"
    kind: "Pod"
  filter:
    create: |
      now() - timestamp(new.metadata.creationTimestamp) < duration("5m")
    update: |
      new.metadata.generation != old.metadata.generation
  destination:
    method: "POST"
    urlTemplate: "https://webhook.site/4170cffc-284d-415d-ae53-4db6dc9947c6"
    bodyTemplate: |
      {
        "test": "{{ regexFindAll "^alpine$" .metadata.name -1 }}"
      }




